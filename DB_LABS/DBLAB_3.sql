-- 19K-1043 Salman Ahmed Khan DB LAB 3

--1 CREATING USER AND PROVIDING GRANT
CREATE USER SALMAN IDENTIFIED BY abc123;
GRANT CONNECT, RESOURCE, DBA TO SALMAN;

--2
CREATE TABLE JOBS(
JOB_ID VARCHAR(20) NOT NULL PRIMARY KEY,
JOB_TITLE VARCHAR(35) NOT NULL,
MIN_SALARY NUMBER(6),
MAX_SALARY NUMBER(6)
);

-- ALTER TABLE SALMAN.JOBS ADD CONSTRAINT UNIQUE_ID UNIQUE(JOB_ID);

CREATE TABLE JOB_HISTORY(
EMPLOYEE_ID NUMBER(6) NOT NULL UNIQUE,
JOB_ID VARCHAR(20) NOT NULL PRIMARY KEY,
START_DATE DATE,
END_DATE DATE,
DEPARTMENT_ID VARCHAR(35)
);

--3
ALTER TABLE JOBS MODIFY JOB_ID NUMBER(6);

--4
ALTER TABLE JOBS MODIFY JOB_ID VARCHAR(20);
ALTER TABLE JOB_HISTORY ADD CONSTRAINT FORGN_KEY FOREIGN KEY(JOB_ID) REFERENCES JOBS(JOB_ID);

--5
INSERT INTO JOBS VALUES('1043', 'SOFTWARE ENGINEER', 90000, 100000);
-- SELECT * FROM JOB_HISTORY;

--6
ALTER TABLE JOBS ADD JOB_NATURE VARCHAR(35);

--7
CREATE TABLE EMPLOYEE AS SELECT * FROM HR.EMPLOYEES;
ALTER TABLE SALMAN.EMPLOYEE ADD PRIMARY KEY(EMPLOYEE_ID);

--8
ALTER TABLE SALMAN.JOB_HISTORY ADD CONSTRAINT FORGN_KEY FOREIGN KEY(EMPLOYEE_ID) REFERENCES SALMAN.EMPLOYEE(EMPLOYEE_ID);

--9
ALTER TABLE SALMAN.JOBS DROP COLUMN JOB_NATURE;

--10
ALTER TABLE EMPLOYEE ADD CONSTRAINT NAMEE CHECK(FIRST_NAME = UPPER(FIRST_NAME)) ENABLE NOVALIDATE;

--11
ALTER TABLE EMPLOYEE ADD CONSTRAINT SALARY_CHECK UNIQUE(SALARY) ENABLE NOVALIDATE;

--12
ALTER TABLE EMPLOYEE MODIFY PHONE_NUMBER NOT NULL;

--13
INSERT INTO SALMAN.EMPLOYEE VALUES(122134,'SALMAN', 'AHMEDKHAN', 'SALMAN@GM.COM', 019221, '29-JUN-2010', 'K191043', NULL, NULL, NULL, NULL);

--14
UPDATE SALMAN.EMPLOYEE SET SALARY = 8000 WHERE EMPLOYEE_ID = 105 AND SALARY < 1000;

--15
ALTER TABLE SALMAN.EMPLOYEE ADD CONSTRAINT EMP_JOB_ID PRIMARY KEY(EMPLOYEE_ID, JOB_ID);

--16
DROP TABLE SALMAN.EMPLOYEE;